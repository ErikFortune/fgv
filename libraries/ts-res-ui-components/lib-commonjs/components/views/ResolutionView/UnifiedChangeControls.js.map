{"version":3,"file":"UnifiedChangeControls.js","sourceRoot":"","sources":["../../../../src/components/views/ResolutionView/UnifiedChangeControls.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { CheckIcon, XMarkIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\n\n/**\n * Unified control bar that summarizes all pending changes (edits, additions, deletions)\n * and provides a single Apply/Discard action.\n *\n * Renders chips for the counts of pending edits, additions, and deletions. The Apply button\n * should commit all pending changes atomically (via a system rebuild), and Discard clears all\n * pending change buffers. This replaces older separate controls for edits and resource creation.\n *\n * @public\n */\ninterface UnifiedChangeControlsProps {\n  /** Number of pending edits to existing resources */\n  editCount: number;\n  /** Number of pending new resources to be added */\n  addCount: number;\n  /** Number of resources marked for deletion */\n  deleteCount: number;\n  /** Whether an apply operation is in progress (shows spinner and disables buttons) */\n  isApplying?: boolean;\n  /** Disable all actions (e.g., when no resolver/context is active) */\n  disabled?: boolean;\n  /** Optional CSS class names to attach to the container */\n  className?: string;\n  /** Apply all pending changes in one step (typically triggers rebuild) */\n  onApplyAll: () => Promise<void> | void;\n  /** Discard all pending changes (edits, additions, deletions) */\n  onDiscardAll: () => void;\n}\n\n/**\n * Unified change controls for ResolutionView.\n *\n * @example\n * ```tsx\n * <UnifiedChangeControls\n *   editCount={state.editedResources.size}\n *   addCount={state.pendingResources.size}\n *   deleteCount={state.pendingResourceDeletions.size}\n *   isApplying={state.isApplyingEdits}\n *   disabled={!state.currentResolver}\n *   onApplyAll={actions.applyPendingResources}\n *   onDiscardAll={() => {\n *     actions.discardEdits();\n *     actions.discardPendingResources();\n *   }}\n * />\n * ```\n *\n * @public\n */\nexport const UnifiedChangeControls: React.FC<UnifiedChangeControlsProps> = ({\n  editCount,\n  addCount,\n  deleteCount,\n  isApplying = false,\n  disabled = false,\n  className = '',\n  onApplyAll,\n  onDiscardAll\n}) => {\n  const totalChanges = editCount + addCount + deleteCount;\n  const hasChanges = totalChanges > 0;\n  const [confirmDiscard, setConfirmDiscard] = useState(false);\n\n  if (!hasChanges && !isApplying) {\n    return null;\n  }\n\n  return (\n    <div className={`bg-white rounded-lg border border-gray-200 shadow-sm ${className}`}>\n      <div className=\"p-4\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <div className=\"flex items-center space-x-2\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Pending Changes</h3>\n            {editCount > 0 && (\n              <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800\">\n                {editCount} edit{editCount !== 1 ? 's' : ''}\n              </span>\n            )}\n            {addCount > 0 && (\n              <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800\">\n                {addCount} addition{addCount !== 1 ? 's' : ''}\n              </span>\n            )}\n            {deleteCount > 0 && (\n              <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800\">\n                {deleteCount} deletion{deleteCount !== 1 ? 's' : ''}\n              </span>\n            )}\n          </div>\n\n          {isApplying && (\n            <div className=\"flex items-center text-blue-600\">\n              <ArrowPathIcon className=\"h-4 w-4 mr-1 animate-spin\" />\n              <span className=\"text-sm font-medium\">Applying...</span>\n            </div>\n          )}\n        </div>\n\n        {!confirmDiscard ? (\n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={() => onApplyAll()}\n              disabled={disabled || isApplying || !hasChanges}\n              className=\"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title=\"Apply all pending changes\"\n            >\n              {isApplying ? (\n                <>\n                  <ArrowPathIcon className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Applying...\n                </>\n              ) : (\n                <>\n                  <CheckIcon className=\"h-4 w-4 mr-2\" />\n                  Apply Changes\n                </>\n              )}\n            </button>\n\n            <button\n              onClick={() => setConfirmDiscard(true)}\n              disabled={disabled || isApplying || !hasChanges}\n              className=\"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title=\"Discard all pending changes\"\n            >\n              <XMarkIcon className=\"h-4 w-4 mr-2\" />\n              Discard Changes\n            </button>\n          </div>\n        ) : (\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3\">\n            <div className=\"text-sm text-yellow-800 mb-2\">\n              Discard all pending changes? This cannot be undone.\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={() => {\n                  onDiscardAll();\n                  setConfirmDiscard(false);\n                }}\n                className=\"inline-flex items-center px-3 py-1.5 text-sm font-medium text-white bg-red-600 border border-transparent rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n              >\n                <XMarkIcon className=\"h-4 w-4 mr-1\" /> Yes, Discard\n              </button>\n              <button\n                onClick={() => setConfirmDiscard(false)}\n                className=\"inline-flex items-center px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default UnifiedChangeControls;\n"]}