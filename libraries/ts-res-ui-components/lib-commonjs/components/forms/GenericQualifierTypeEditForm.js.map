{"version":3,"file":"GenericQualifierTypeEditForm.js","sourceRoot":"","sources":["../../../src/components/forms/GenericQualifierTypeEditForm.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\nimport { XMarkIcon, InformationCircleIcon, ExclamationTriangleIcon } from '@heroicons/react/24/outline';\nimport { QualifierTypes } from '@fgv/ts-res';\nimport { JsonObject } from '@fgv/ts-json-base';\nimport { Result } from '@fgv/ts-utils';\n\n/**\n * Props for the GenericQualifierTypeEditForm component.\n * Used for editing custom qualifier types with JSON configuration.\n *\n * @public\n */\nexport interface GenericQualifierTypeEditFormProps {\n  /** Existing qualifier type to edit (undefined for creating new type) */\n  qualifierType?: QualifierTypes.Config.IAnyQualifierTypeConfig;\n  /** Callback fired when qualifier type is saved */\n  onSave: (qualifierType: QualifierTypes.Config.IAnyQualifierTypeConfig) => void;\n  /** Callback fired when editing is cancelled */\n  onCancel: () => void;\n  /** Names of existing qualifier types to prevent duplicates */\n  existingNames?: string[];\n}\n\ninterface FormData {\n  name: string;\n  systemType: string;\n  configuration: string; // JSON string\n}\n\ninterface ValidationErrors {\n  name?: string;\n  systemType?: string;\n  configuration?: string;\n}\n\n/**\n * Form component for editing custom qualifier types with JSON configuration.\n * Provides a generic editor for qualifier types that don't use the built-in system types.\n *\n * @public\n */\nexport const GenericQualifierTypeEditForm: React.FC<GenericQualifierTypeEditFormProps> = ({\n  qualifierType,\n  onSave,\n  onCancel,\n  existingNames = []\n}) => {\n  const [formData, setFormData] = useState<FormData>(() => {\n    if (qualifierType) {\n      return {\n        name: qualifierType.name,\n        systemType: qualifierType.systemType,\n        configuration: JSON.stringify(qualifierType.configuration || {}, null, 2)\n      };\n    }\n    return {\n      name: '',\n      systemType: '',\n      configuration: JSON.stringify({}, null, 2)\n    };\n  });\n\n  const [errors, setErrors] = useState<ValidationErrors>({});\n  const [isJsonValid, setIsJsonValid] = useState(true);\n  const [configValidation, setConfigValidation] = useState<Result<any> | null>(null);\n\n  // Validate JSON configuration on every change\n  useEffect(() => {\n    try {\n      const parsed = JSON.parse(formData.configuration);\n      setIsJsonValid(true);\n\n      // Attempt to validate the configuration structure if we have both name and systemType\n      if (formData.name && formData.systemType) {\n        try {\n          const testConfig: QualifierTypes.Config.IAnyQualifierTypeConfig = {\n            name: formData.name,\n            systemType: formData.systemType,\n            configuration: parsed as JsonObject\n          };\n\n          // For now, we'll just check basic structure\n          // In the future, this could call validateConfigurationJson if we had a qualifier type instance\n          setConfigValidation(null); // Could be enhanced with actual validation\n          setErrors((prev) => ({ ...prev, configuration: undefined }));\n        } catch (validationError) {\n          setConfigValidation(null); // Could store validation result\n          setErrors((prev) => ({ ...prev, configuration: undefined }));\n        }\n      } else {\n        setConfigValidation(null);\n        setErrors((prev) => ({ ...prev, configuration: undefined }));\n      }\n    } catch (error) {\n      setIsJsonValid(false);\n      setConfigValidation(null);\n      setErrors((prev) => ({\n        ...prev,\n        configuration: error instanceof Error ? `JSON Error: ${error.message}` : 'Invalid JSON'\n      }));\n    }\n  }, [formData.configuration, formData.name, formData.systemType]);\n\n  const validateForm = useCallback((): boolean => {\n    const newErrors: ValidationErrors = {};\n\n    // Validate name\n    if (!formData.name.trim()) {\n      newErrors.name = 'Name is required';\n    } else if (\n      existingNames.includes(formData.name.trim()) &&\n      (!qualifierType || qualifierType.name !== formData.name.trim())\n    ) {\n      newErrors.name = 'Name already exists';\n    }\n\n    // Validate system type\n    if (!formData.systemType.trim()) {\n      newErrors.systemType = 'System type is required';\n    }\n\n    // Validate JSON\n    if (!isJsonValid) {\n      newErrors.configuration = 'Valid JSON is required';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  }, [formData, qualifierType, existingNames, isJsonValid]);\n\n  const handleSave = useCallback(() => {\n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      const configuration = JSON.parse(formData.configuration) as JsonObject;\n      const newQualifierType: QualifierTypes.Config.IAnyQualifierTypeConfig = {\n        name: formData.name.trim(),\n        systemType: formData.systemType.trim(),\n        configuration\n      };\n\n      onSave(newQualifierType);\n    } catch (error) {\n      setErrors((prev) => ({\n        ...prev,\n        configuration: 'Failed to parse JSON configuration'\n      }));\n    }\n  }, [formData, validateForm, onSave]);\n\n  const handleInputChange = useCallback(\n    (field: keyof FormData, value: string) => {\n      setFormData((prev) => ({ ...prev, [field]: value }));\n      // Clear error when user starts typing\n      if (errors[field as keyof ValidationErrors]) {\n        setErrors((prev) => ({ ...prev, [field]: undefined }));\n      }\n    },\n    [errors]\n  );\n\n  const formatJson = useCallback(() => {\n    try {\n      const parsed = JSON.parse(formData.configuration);\n      const formatted = JSON.stringify(parsed, null, 2);\n      setFormData((prev) => ({ ...prev, configuration: formatted }));\n    } catch (error) {\n      // If JSON is invalid, don't format\n    }\n  }, [formData.configuration]);\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900\">\n              {qualifierType ? 'Edit Custom Qualifier Type' : 'Add Custom Qualifier Type'}\n            </h3>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Configure a custom qualifier type with JSON configuration\n            </p>\n          </div>\n          <button\n            onClick={onCancel}\n            className=\"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100\"\n          >\n            <XMarkIcon className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {/* Form */}\n        <div className=\"p-6 space-y-6\">\n          {/* Name Field */}\n          <div>\n            <label htmlFor=\"qualifierTypeName\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Name\n            </label>\n            <input\n              id=\"qualifierTypeName\"\n              type=\"text\"\n              value={formData.name}\n              onChange={(e) => handleInputChange('name', e.target.value)}\n              className={`w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                errors.name ? 'border-red-300 bg-red-50' : 'border-gray-300'\n              }`}\n              placeholder=\"Enter qualifier type name (e.g., 'custom-dimension')\"\n            />\n            {errors.name && (\n              <div className=\"mt-1 flex items-center text-sm text-red-600\">\n                <ExclamationTriangleIcon className=\"w-4 h-4 mr-1 flex-shrink-0\" />\n                {errors.name}\n              </div>\n            )}\n          </div>\n\n          {/* System Type Field */}\n          <div>\n            <label htmlFor=\"systemType\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              System Type\n            </label>\n            <input\n              id=\"systemType\"\n              type=\"text\"\n              value={formData.systemType}\n              onChange={(e) => handleInputChange('systemType', e.target.value)}\n              className={`w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                errors.systemType ? 'border-red-300 bg-red-50' : 'border-gray-300'\n              }`}\n              placeholder=\"Enter system type (e.g., 'custom', 'dimension')\"\n            />\n            {errors.systemType && (\n              <div className=\"mt-1 flex items-center text-sm text-red-600\">\n                <ExclamationTriangleIcon className=\"w-4 h-4 mr-1 flex-shrink-0\" />\n                {errors.systemType}\n              </div>\n            )}\n          </div>\n\n          {/* Configuration JSON Field */}\n          <div>\n            <div className=\"flex items-center justify-between mb-2\">\n              <label htmlFor=\"configuration\" className=\"block text-sm font-medium text-gray-700\">\n                Configuration (JSON)\n              </label>\n              <button\n                type=\"button\"\n                onClick={formatJson}\n                disabled={!isJsonValid}\n                className=\"text-xs text-blue-600 hover:text-blue-800 disabled:text-gray-400\"\n              >\n                Format JSON\n              </button>\n            </div>\n            <textarea\n              id=\"configuration\"\n              rows={12}\n              value={formData.configuration}\n              onChange={(e) => handleInputChange('configuration', e.target.value)}\n              className={`w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm ${\n                errors.configuration ? 'border-red-300 bg-red-50' : 'border-gray-300'\n              }`}\n              placeholder='{\"property\": \"value\"}'\n            />\n            {errors.configuration && (\n              <div className=\"mt-1 flex items-center text-sm text-red-600\">\n                <ExclamationTriangleIcon className=\"w-4 h-4 mr-1 flex-shrink-0\" />\n                {errors.configuration}\n              </div>\n            )}\n            {isJsonValid && (\n              <div className=\"mt-1 flex items-center text-sm text-green-600\">\n                <InformationCircleIcon className=\"w-4 h-4 mr-1 flex-shrink-0\" />\n                Valid JSON configuration\n              </div>\n            )}\n          </div>\n\n          {/* Help Text */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <div className=\"flex items-start\">\n              <InformationCircleIcon className=\"w-5 h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0\" />\n              <div className=\"text-sm text-blue-700\">\n                <p className=\"font-medium mb-1\">Custom Qualifier Types</p>\n                <p>\n                  Custom qualifier types allow you to extend the system with your own validation logic. The\n                  configuration object can contain any valid JSON and will be passed to your custom qualifier\n                  type implementation.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-end gap-3 p-6 border-t border-gray-200\">\n          <button\n            onClick={onCancel}\n            className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleSave}\n            disabled={!isJsonValid || Object.keys(errors).length > 0}\n            className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {qualifierType ? 'Update' : 'Create'} Qualifier Type\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n"]}